schema: smart_building
description: "Contains energy consumption data for smart buildings"
tables:
  - name: buildings
    description: "Stores information about physical buildings, useful to query by name or other building attributes"
    columns:
      - name: id
        type: integer
        description: "Primary key identifier"
      - name: name
        type: varchar(255)
        description: "Building name"
      - name: address
        type: text
        description: "Physical address of the building"
  
  - name: energy_consumption
    description: "Records building energy consumption by hour over time"
    columns:
      - name: id
        type: serial
        description: "Auto-incrementing primary key"
      - name: building_id
        type: integer
        description: "Foreign key to buildings table"
      - name: date
        type: timestamp
        description: "Timestamp of the reading"
      - name: consumption_kwh
        type: float8
        description: "Energy consumption in kilowatt-hours"

  - name: building_energy_consumption_metrics
    description: "Provides aggregated energy consumption metrics per building with weekly/monthly comparisons. Useful to get weekly/monthly energy consumption metrics for a building."
   
    columns:
      - name: building_id
        type: int4
        description: "Foreign key to buildings table"
      - name: building_name
        type: varchar(255)
        description: "Name of the building"
      - name: energy_consumption_kw_last_week
        type: float8
        description: "Energy consumption in kilowatt-hours for the last week"
      - name: energy_consumption_kw_previous_week
        type: float8
        description: "Energy consumption in kilowatt-hours for the previous week"
      - name: energy_consumption_percentage_diff_previous_week
        type: float8
        description: "Percentage difference in energy consumption compared to the previous week"
      - name: energy_consumption_kw_last_month
        type: float8
        description: "Energy consumption in kilowatt-hours for the last month"
      - name: energy_consumption_kw_previous_month
        type: float8
        description: "Energy consumption in kilowatt-hours for the previous month"
      - name: energy_consumption_percentage_diff_previous_month
        type: float8
        description: "Percentage difference in energy consumption compared to the previous month"
  
   